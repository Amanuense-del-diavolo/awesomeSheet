function awesomesheet(){function a(a){return document.querySelector(a)}function b(a){return document.querySelectorAll(a)}function c(a,b){a.classList.toggle(b)}function d(a,b){a.classList.add(b)}function e(a,b){a.classList.remove(b)}function f(a,b){for(var c=b.charAt(0);a&&a!==document;a=a.parentNode){if("."===c&&a.classList.contains(b.substr(1)))return a;if("#"===c&&a.id===b.substr(1))return a;if("["===c&&a.hasAttribute(b.substr(1,b.length-2)))return a;if(a.tagName.toLowerCase()===b)return a}return!1}function g(a,b){localStorage.getItem&&localStorage.setItem(a,b)}function h(a){if(""==localStorage.getItem(a))localStorage.removeItem(a);else if(localStorage.getItem(a))return localStorage.getItem(a)}function i(a){var b=parseInt(a.value,10)||0;return b}function j(){for(var a=0;a<Pa.length;a++){var b=Pa[a].querySelector(".consumable-total");b.addEventListener("input",function(){k(this),l(this)},!1)}}function k(a){var b=f(a,".consumable-block"),c=b.querySelector(".consumable-total");c.value<=0?c.value="":c.value>=100&&(c.value=100)}function l(a){function b(){var a=document.createElement("div");a.setAttribute("class","check-group"),d.appendChild(a)}var c=f(a,".consumable-block"),d=c.querySelector(".consumable-counts"),e=parseInt(a.value,10)||0,g=d.querySelector(".check-group"),h=d.querySelectorAll(".check").length;for(g||e>0&&b();e>h;){var g=d.lastChild;g.children.length>=10&&(b(),g=d.lastChild);var i=document.createElement("span");i.setAttribute("class","check icon-radio-button-checked"),i.setAttribute("tabindex","1"),g.appendChild(i),i.addEventListener("click",function(){m(this)},!1),h++}for(;h>e;){var g=d.lastChild;g.children.length>0&&g.removeChild(g.lastChild),g.children.length<=0&&(g.remove(),h>0&&(g=d.querySelector(".check-group"))),h--}}function m(a){c(a,"icon-radio-button-checked"),c(a,"icon-radio-button-unchecked"),c(a,"active")}function n(){for(var a=b(".consumable-total"),c=0;c<a.length;c++)l(a[c])}function o(){for(var a=0;a<Oa.length;a++){var b=Oa[a].querySelector(".clone-add"),c=Oa[a].querySelector(".clone-remove");b.addEventListener("click",function(){p(this)},!1),c.addEventListener("click",function(){q(this)},!1)}}function p(a){console.log("add hit");var b=f(a,".clone-block"),c=b.querySelector(".clone-controls"),d=b.querySelectorAll(".consumable-block"),e=d.length+1,g='<div class="col-xs-8 col-sm-10"><div class="input-block"><label class="input-label" for="input-consumable-'+e+'">Consumable</label><input class="input-field" id="input-consumable-'+e+'" type="text"></div></div><div class="col-xs-4 col-sm-2"><div class="input-block"><label class="input-label" for="input-consumable-'+e+'-total-cahrges">Total</label><input class="input-field consumable-total" id="input-consumable-'+e+'-total-cahrges" type="number"></div></div><div class="col-xs-12"><div class="consumable-counts clearfix"></div></div>',h=document.createElement("div");h.setAttribute("class","consumable-block"),h.setAttribute("data-clone-count",e),b.insertBefore(h,c),h.innerHTML=g,j(),n()}function q(a){console.log("remove hit")}function r(){for(var a=0;a<Na.length;a++){var b=Na[a].querySelector(".hidable-toggle");b.addEventListener("click",function(){s(this)},!1)}}function s(a){var b=(a.innerHTML,a.querySelector(".icon")),g=a.querySelector(".text"),h=f(a,".hidable-block"),i=h.querySelectorAll(".hidable"),j=h.querySelectorAll(".hidable-on-empty-input"),k=h.querySelectorAll(".hidable-on-empty-textarea");if("true"==h.dataset.allHidden){for(var l=0;l<i.length;l++)e(i[l],"hidden");for(var l=0;l<j.length;l++)e(j[l],"hidden");for(var l=0;l<k.length;l++)e(k[l],"hidden");h.dataset.allHidden="false",c(b,"icon-unfold-less"),c(b,"icon-unfold-more"),g.innerHTML="Hide Fields"}else if("false"==h.dataset.allHidden){for(var l=0;l<j.length;l++){var m=j[l].querySelector(".input-field");(null==m.value||""==m.value)&&d(j[l],"hidden")}for(var l=0;l<i.length;l++)d(i[l],"hidden");for(var l=0;l<k.length;l++){var n=k[l].querySelector(".textarea");(null==n.innerHTML||""==n.innerHTML)&&d(k[l],"hidden")}h.dataset.allHidden="true",c(b,"icon-unfold-less"),c(b,"icon-unfold-more"),g.innerHTML="Show All"}}function t(a,b){var c=(i(a),u(a));b.innerHTML=c}function u(a){var b=Math.floor((a.value-10)/2);return b}function v(){for(var a=b(".stats"),c=0;c<a.length;c++){var d=a[c].querySelector(".score"),e=a[c].querySelector(".modifier"),f=a[c].querySelector(".temp-score"),g=a[c].querySelector(".temp-modifier");""!==d.value?t(d,e):e.innerHTML="",""!==f.value?t(f,g):g.innerHTML=""}}function w(){for(var a=b(".stats .score"),c=b(".stats .temp-score"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){v(),U(),Y(),x()},!1);for(var d=0;d<c.length;d++)c[d].addEventListener("input",function(){v(),U(),Y(),x()},!1)}function x(){g("stats_str",ba.value),g("stats_dex",ca.value),g("stats_con",da.value),g("stats_int",ea.value),g("stats_wis",fa.value),g("stats_cha",ga.value),g("stats_strTemp",na.value),g("stats_dexTemp",oa.value),g("stats_conTemp",pa.value),g("stats_intTemp",qa.value),g("stats_wisTemp",ra.value),g("stats_chaTemp",sa.value)}function y(){h("stats_str")&&(ba.value=h("stats_str")),h("stats_dex")&&(ca.value=h("stats_dex")),h("stats_con")&&(da.value=h("stats_con")),h("stats_int")&&(ea.value=h("stats_int")),h("stats_wis")&&(fa.value=h("stats_wis")),h("stats_cha")&&(ga.value=h("stats_cha")),h("stats_strTemp")&&(na.value=h("stats_strTemp")),h("stats_dexTemp")&&(oa.value=h("stats_dexTemp")),h("stats_conTemp")&&(pa.value=h("stats_conTemp")),h("stats_intTemp")&&(qa.value=h("stats_intTemp")),h("stats_wisTemp")&&(ra.value=h("stats_wisTemp")),h("stats_chaTemp")&&(sa.value=h("stats_chaTemp"))}function z(){for(var a=b(".spell-known-item"),c=0;c<a.length;c++){var d=a[c].dataset.eventListener;"false"==d&&(a[c].dataset.eventListener="true",a[c].addEventListener("click",function(){K(this),N()},!1))}}function A(){for(var a=b(".spell-known-item"),c=0;c<a.length;c++)a[c].dataset.eventListener="false"}function B(){for(var a=0;a<Ga.length;a++)Ga[a].addEventListener("click",function(){M(this),N(),H()},!1)}function C(){for(var a=0;a<Ha.length;a++)Ha[a].addEventListener("click",function(){G(this,"prepare"),N()},!1)}function D(){for(var a=0;a<Ia.length;a++)Ia[a].addEventListener("click",function(){G(this,"unprepare"),N()},!1)}function E(){for(var a=0;a<Ja.length;a++)Ja[a].addEventListener("click",function(){G(this,"cast"),N()},!1)}function F(){for(var a=0;a<Ka.length;a++)Ka[a].addEventListener("click",function(){G(this,"remove"),N()},!1)}function G(a,b){var c=f(a,".spell-level"),g=c.querySelector(".spells-known"),h=(g.dataset.prepareSpellState,g.dataset.castSpellState,g.dataset.deleteSpellState,c.querySelector(".prepare-spell"),c.querySelector(".unprepare-spell"),c.querySelector(".cast-spell"),c.querySelector(".remove-spell"),f(a,".spell-state").querySelectorAll(".button"));if(a.classList.contains("active")){for(var i=0;i<h.length;i++)e(h[i],"active");e(a,"active"),g.dataset.prepareSpellState=" false",g.dataset.unprepareSpellState=" false",g.dataset.castSpellState=" false",g.dataset.deleteSpellState=" false",e(g,"prepare-state"),e(g,"unprepare-state"),e(g,"cast-state"),e(g,"delete-state")}else{for(var i=0;i<h.length;i++)e(h[i],"active");d(a,"active"),"prepare"==b?(g.dataset.prepareSpellState="true",g.dataset.unprepareSpellState="false",g.dataset.castSpellState="false",g.dataset.deleteSpellState="false",d(g,"prepare-state"),e(g,"unprepare-state"),e(g,"cast-state"),e(g,"delete-state")):"unprepare"==b?(g.dataset.prepareSpellState="false",g.dataset.unprepareSpellState="true",g.dataset.castSpellState="false",g.dataset.deleteSpellState="false",e(g,"prepare-state"),d(g,"unprepare-state"),e(g,"cast-state"),e(g,"delete-state")):"cast"==b?(g.dataset.prepareSpellState="false",g.dataset.unprepareSpellState="false",g.dataset.castSpellState="true",g.dataset.deleteSpellState="false",e(g,"prepare-state"),e(g,"unprepare-state"),d(g,"cast-state"),e(g,"delete-state")):"remove"==b&&(g.dataset.prepareSpellState="false",g.dataset.unprepareSpellState="false",g.dataset.castSpellState="false",g.dataset.deleteSpellState="true",e(g,"prepare-state"),e(g,"unprepare-state"),e(g,"cast-state"),d(g,"delete-state"))}}function H(){for(var a=b(".spells-known"),c=0;c<a.length;c++){var g=f(a[c],".spell-level"),h=g.querySelector(".spells-known"),i=g.querySelector(".remove-spell"),j=g.querySelector(".prepare-spell"),k=g.querySelector(".unprepare-spell"),l=g.querySelector(".cast-spell");a[c].children.length>0?(e(i,"hidden"),e(j,"hidden"),e(k,"hidden"),e(l,"hidden")):(h.dataset.deleteSpellState="false",d(i,"hidden"),d(j,"hidden"),d(k,"hidden"),d(l,"hidden"),e(i,"active"),e(j,"active"),e(k,"active"),e(l,"active"))}}function I(){for(var a=0;a<Ga.length;a++){var b=f(Ga[a],".new-spell"),c=b.querySelector("input");c.addEventListener("keypress",function(){J(this)},!1)}}function J(a){var b=event.keyCode||event.which;13==b&&(M(a),N())}function K(a){var b=f(a,".spell-level"),g=b.querySelector(".spells-known"),h=g.dataset.prepareSpellState,i=g.dataset.unprepareSpellState,j=g.dataset.castSpellState,k=g.dataset.deleteSpellState,l=a.querySelector(".spell-marks");if("true"==h){var m=document.createElement("span");m.setAttribute("class","icon icon-radio-button-checked"),l.insertBefore(m,l.firstChild),l.children.length>0&&(d(a,"button-primary"),e(a,"button-tertiary"),e(a,"hidable"))}if("true"==i&&(l.firstChild&&l.firstChild.remove(),l.children.length<=0&&(e(a,"button-primary"),d(a,"button-tertiary"),d(a,"hidable"))),"true"==j){for(var n=l.children,o=!1,p=0;p<n.length;p++)if(n[p].classList.contains("icon-radio-button-checked")){c(n[p],"icon-radio-button-checked"),c(n[p],"icon-radio-button-unchecked");break}for(var p=0;p<n.length;p++)o=n[p].classList.contains("icon-radio-button-unchecked")?!0:!1;o&&(e(a,"button-primary"),d(a,"button-tertiary"))}"true"==k&&a.remove(),H()}function L(){for(var c=b(".spells-prepared"),d=0;d<c.length;d++){var e=d,f="spell-prepared-level-"+e,g=h(f),i=a(".spells-prepared.spell-level-"+e);h(f)&&(i.innerHTML=g)}}function M(a){var b=(f(a,".spell-level").dataset.spellLevel,f(a,".new-spell")),c=f(a,".spell-level").querySelector(".spells-known"),d=b.querySelector("input"),e=d.value,g=document.createElement("a");g.setAttribute("href","javascript:void(0)"),g.setAttribute("data-event-listener","false"),g.setAttribute("class","spell-known-item button button-tertiary hidable"),g.innerHTML=e;var h=document.createElement("span");h.setAttribute("class","spell-marks"),""!==e&&(c.appendChild(g),g.appendChild(h),d.value=""),z(),H()}function N(){for(var a=b(".spells-known"),c=0;c<a.length;c++){var d=c,e="spell-known-level-"+d,f=a[c];g(e,f.innerHTML)}}function O(){for(var a=b(".spells-known"),c=0;c<a.length;c++){var d=c,e="spell-known-level-"+d,f=h(e),g=a[c];h(e)&&(g.innerHTML=f)}}function P(a){var b=a.classList;g(b[1],a.innerHTML)}function Q(){for(var b=0;b<Ea.length;b++){var c=Ea[b].classList;h(c[1])&&(a("."+c[1]).innerHTML=h(c[1]))}}function R(){for(var a=0;a<Ea.length;a++)Ea[a].addEventListener("input",function(){P(this)},!1)}function S(){for(var a=[],b=0;b<Fa.length;b++)a.push(Fa[b].value);g("input-skill-list",a)}function T(){var a=h("input-skill-list");if(a)var b=a.split(",");if(a)for(var c=0;c<Fa.length;c++)Fa[c].value=parseInt(b[c],10)}function U(){for(var a=0;a<za.length;a++){var b,c=za[a].querySelector(".name.skill-value").dataset.ability;"str"==c?b=""==ta.innerHTML?parseInt(ha.innerHTML,10):parseInt(ta.innerHTML,10):"dex"==c?b=""==ua.innerHTML?parseInt(ia.innerHTML,10):parseInt(ua.innerHTML,10):"con"==c?b=""==va.innerHTML?parseInt(ja.innerHTML,10):parseInt(va.innerHTML,10):"int"==c?b=""==wa.innerHTML?parseInt(ka.innerHTML,10):parseInt(wa.innerHTML,10):"wis"==c?b=""==xa.innerHTML?parseInt(la.innerHTML,10):parseInt(xa.innerHTML,10):"cha"==c&&(b=""==ya.innerHTML?parseInt(ma.innerHTML,10):parseInt(ya.innerHTML,10)),isNaN(b)&&(b=0);var d=i(za[a].querySelector(".ranks.skill-value")),e=i(za[a].querySelector(".misc.skill-value")),f=b+d+e;za[a].querySelector(".total.skill-value").innerHTML=f}}function V(){for(var a=b(".ranks.skill-value"),c=b(".misc.skill-value"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){U(),S()},!1);for(var d=0;d<c.length;d++)c[d].addEventListener("input",function(){U(),S()},!1)}function W(){var a=window.document,b=a.documentElement,d=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullscreen,e=a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen;a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement?(e.call(a),c(Ba,"active"),c(Ba.querySelector("span"),"icon-fullscreen-exit"),c(Ba.querySelector("span"),"icon-fullscreen")):(d.call(b),c(Ba,"active"),c(Ba.querySelector("span"),"icon-fullscreen-exit"),c(Ba.querySelector("span"),"icon-fullscreen"))}function X(a){var b,c=a.parentNode,f=c.querySelector(".input-field");if(c.querySelector(".input-label"))var b=c.querySelector(".input-label");c.querySelector(".input-label")&&(f==document.activeElement?d(b,"input-label-focus"):e(b,"input-label-focus"))}function Y(){function b(){v.length>0&&(w=v.reduce(function(a,b){return a+b}))}for(var c=0;c<Ca.length;c++){for(var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=Ca[c].querySelector(".total"),u=(parseInt(Ca[c].querySelector(".total").innerHTML,10)||0,Ca[c].querySelectorAll(".input-field")),v=[],w=0,x=0;x<u.length;x++)u.length>0&&"true"==u[x].dataset.modifier&&v.push(parseInt(u[x].value,10)||0);b(),"true"==Ca[c].dataset.strBonus&&(d=""==ta.innerHTML?parseInt(ha.innerHTML,10):parseInt(ta.innerHTML,10)),"true"==Ca[c].dataset.dexBonus&&(e=""==ua.innerHTML?parseInt(ia.innerHTML,10):parseInt(ua.innerHTML,10)),"true"==Ca[c].dataset.conBonus&&(f=""==va.innerHTML?parseInt(ja.innerHTML,10):parseInt(va.innerHTML,10)),"true"==Ca[c].dataset.intBonus&&(g=""==wa.innerHTML?parseInt(ka.innerHTML,10):parseInt(wa.innerHTML,10)),"true"==Ca[c].dataset.wisBonus&&(h=""==xa.innerHTML?parseInt(la.innerHTML,10):parseInt(xa.innerHTML,10)),"true"==Ca[c].dataset.chaBonus&&(i=""==ya.innerHTML?parseInt(ma.innerHTML,10):parseInt(ya.innerHTML,10)),"true"==Ca[c].dataset.babBonus&&(j=parseInt(a("#input-base-attack").value,10)),"true"==Ca[c].dataset.sizeBonus&&(k=parseInt(a("#input-size-bonus").value,10)),"true"==Ca[c].dataset.specialSizeBonus&&(l=parseInt(a("#input-special-size-bonus").value,10)),"true"==Ca[c].dataset.levelBonus&&(m=parseInt(a("#input-level").value,10)),"true"==Ca[c].dataset.acArmor&&(o=parseInt(a("#input-ac-armor").value,10)),"true"==Ca[c].dataset.acShield&&(p=parseInt(a("#input-ac-shield").value,10)),"true"==Ca[c].dataset.acDeflect&&(q=parseInt(a("#input-ac-deflect").value,10)),"true"==Ca[c].dataset.acDodge&&(r=parseInt(a("#input-ac-dodge").value,10)),"true"==Ca[c].dataset.acNatural&&(s=parseInt(a("#input-ac-natural").value,10)),"true"==Ca[c].dataset.plusTenBonus&&(n=10),isNaN(m)&&(m=0),isNaN(d)&&(d=0),isNaN(e)&&(e=0),isNaN(f)&&(f=0),isNaN(g)&&(g=0),isNaN(h)&&(h=0),isNaN(i)&&(i=0),isNaN(j)&&(j=0),isNaN(k)&&(k=0),isNaN(l)&&(l=0),isNaN(m)&&(m=0),isNaN(n)&&(n=0),isNaN(o)&&(o=0),isNaN(p)&&(p=0),isNaN(q)&&(q=0),isNaN(r)&&(r=0),isNaN(s)&&(s=0);var y=w+m+j+k+l+n+d+e+f+g+h+i+o+p+q+r+s;t.innerHTML=y}}function Z(){for(var a=0;a<Da.length;a++){var b=Da[a],c=b.querySelector(".input-field");if(b.querySelector(".input-label"))var f=b.querySelector(".input-label");b.querySelector(".input-label")&&(c==document.activeElement?d(f,"input-label-focus"):e(f,"input-label-focus"))}}function $(){for(var a=0;a<Da.length;a++){var b=Da[a].querySelector(".input-field");b.addEventListener("input",function(){X(this),_(this),Y()},!1),b.addEventListener("focus",function(){X(this),_(this),Y()},!1),b.addEventListener("blur",function(){X(this),_(this),Y()},!1)}}function _(a){var b=a.id;g(b,a.value)}function aa(){for(var b=0;b<Da.length;b++){var c=Da[b].querySelector(".input-field").id;h(c)&&(a("#"+c).value=h(c))}}var ba=a(".stats.str .score"),ca=a(".stats.dex .score"),da=a(".stats.con .score"),ea=a(".stats.int .score"),fa=a(".stats.wis .score"),ga=a(".stats.cha .score"),ha=a(".stats.str .modifier"),ia=a(".stats.dex .modifier"),ja=a(".stats.con .modifier"),ka=a(".stats.int .modifier"),la=a(".stats.wis .modifier"),ma=a(".stats.cha .modifier"),na=a(".stats.str .temp-score"),oa=a(".stats.dex .temp-score"),pa=a(".stats.con .temp-score"),qa=a(".stats.int .temp-score"),ra=a(".stats.wis .temp-score"),sa=a(".stats.cha .temp-score"),ta=a(".stats.str .temp-modifier"),ua=a(".stats.dex .temp-modifier"),va=a(".stats.con .temp-modifier"),wa=a(".stats.int .temp-modifier"),xa=a(".stats.wis .temp-modifier"),ya=a(".stats.cha .temp-modifier"),za=(a(".skill-list"),b(".skill-list .skill-details")),Aa=(a(".ac"),a(".ac-touch"),a(".ac-flat-footed"),a(".clear-sheet")),Ba=a(".toggle-fullscreen"),Ca=(b(".spell-check"),b(".input-total-block")),Da=b(".input-block"),Ea=b(".textarea"),Fa=b(".skill-value"),Ga=b(".add-spell"),Ha=b(".prepare-spell"),Ia=b(".unprepare-spell"),Ja=b(".cast-spell"),Ka=b(".remove-spell"),La=a("nav"),Ma=(a(".nav-list"),a(".nav-toggle")),Na=b(".hidable-block"),Oa=b(".clone-block"),Pa=b(".consumable-block");Ma.addEventListener("click",function(){c(La,"open")},!1),window.addEventListener("click",function(a){La.classList.contains("open")&&a.target!=La&&a.target.parentNode!=La&&a.target.parentNode.parentNode!=La&&a.target.parentNode.parentNode.parentNode!=La&&e(La,"open")}),Aa.addEventListener("click",function(){localStorage.clear(),document.location.reload(!0)},!1),Ba.addEventListener("click",function(){W()},!1),L(),O(),Q(),aa(),T(),y(),A(),z(),w(),V(),B(),I(),C(),D(),E(),F(),r(),R(),$(),j(),o(),H(),v(),U(),Z(),Y(),n()}awesomesheet(),smoothScroll.init();