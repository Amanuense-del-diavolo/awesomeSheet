function awesomesheet(){function a(a){return document.querySelector(a)}function b(a){return document.querySelectorAll(a)}function c(a,b){a.classList.toggle(b)}function d(a,b){a.classList.add(b)}function e(a,b){a.classList.remove(b)}function f(a,b){for(var c=b.charAt(0);a&&a!==document;a=a.parentNode){if("."===c&&a.classList.contains(b.substr(1)))return a;if("#"===c&&a.id===b.substr(1))return a;if("["===c&&a.hasAttribute(b.substr(1,b.length-2)))return a;if(a.tagName.toLowerCase()===b)return a}return!1}function g(a,b){localStorage.getItem&&localStorage.setItem(a,b)}function h(a){if(""==localStorage.getItem(a))localStorage.removeItem(a);else if(localStorage.getItem(a))return localStorage.getItem(a)}function i(a){var b=parseInt(a.value,10)||0;return b}function j(a,b){var c=(i(a),k(a));b.innerHTML=c}function k(a){var b=Math.floor((a.value-10)/2);return b}function l(){for(var a=b(".stats"),c=0;c<a.length;c++){var d=a[c].querySelector(".score"),e=a[c].querySelector(".modifier"),f=a[c].querySelector(".temp-score"),g=a[c].querySelector(".temp-modifier");""!==d.value?j(d,e):e.innerHTML="",""!==f.value?j(f,g):g.innerHTML=""}}function m(){for(var a=b(".stats .score"),c=b(".stats .temp-score"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){l(),M(),n()},!1);for(var d=0;d<c.length;d++)c[d].addEventListener("input",function(){l(),M(),n()},!1)}function n(){g("stats_str",U.value),g("stats_dex",V.value),g("stats_con",W.value),g("stats_int",X.value),g("stats_wis",Y.value),g("stats_cha",Z.value),g("stats_strTemp",ea.value),g("stats_dexTemp",fa.value),g("stats_conTemp",ga.value),g("stats_intTemp",ha.value),g("stats_wisTemp",ia.value),g("stats_chaTemp",ja.value)}function o(){h("stats_str")&&(U.value=h("stats_str")),h("stats_dex")&&(V.value=h("stats_dex")),h("stats_con")&&(W.value=h("stats_con")),h("stats_int")&&(X.value=h("stats_int")),h("stats_wis")&&(Y.value=h("stats_wis")),h("stats_cha")&&(Z.value=h("stats_cha")),h("stats_strTemp")&&(ea.value=h("stats_strTemp")),h("stats_dexTemp")&&(fa.value=h("stats_dexTemp")),h("stats_conTemp")&&(ga.value=h("stats_conTemp")),h("stats_intTemp")&&(ha.value=h("stats_intTemp")),h("stats_wisTemp")&&(ia.value=h("stats_wisTemp")),h("stats_chaTemp")&&(ja.value=h("stats_chaTemp"))}function p(){for(var a=b(".spell-known-item"),c=0;c<a.length;c++){var d=a[c].dataset.eventListener;"false"==d&&(a[c].dataset.eventListener="true",a[c].addEventListener("click",function(){z(this),B(),G()},!1))}}function q(){for(var a=b(".spell-prepared-item"),c=0;c<a.length;c++){var d=a[c].dataset.eventListener;"false"==d&&(a[c].dataset.eventListener="true",a[c].addEventListener("click",function(){A(this),B(),G()},!1))}}function r(){for(var a=b(".spell-known-item"),c=0;c<a.length;c++)a[c].dataset.eventListener="false"}function s(){for(var a=b(".spell-prepared-item"),c=0;c<a.length;c++)a[c].dataset.eventListener="false"}function t(){for(var a=0;a<wa.length;a++)wa[a].addEventListener("click",function(){D(this),E(),w()},!1)}function u(){for(var a=0;a<xa.length;a++)xa[a].addEventListener("click",function(){v(this),w()},!1)}function v(a){var b=f(a,".spell-level").querySelector(".spells-known"),d=b.dataset.deleteSpellState;if(b.children.length>0){var e=b.querySelectorAll(".spell-known-item"),g=a.querySelector("span");a.classList.contains("active")?(c(a,"active"),c(g,"icon-close"),c(g,"icon-check-box-unchecked")):(c(a,"active"),c(g,"icon-close"),c(g,"icon-check-box-unchecked"));for(var h=0;h<e.length;h++){var g=e[h].querySelector("span");c(g,"icon-bookmark"),c(g,"icon-close")}"true"==d&&(b.dataset.deleteSpellState="false",c(b,"delete-state")),"false"==d&&(b.dataset.deleteSpellState="true",c(b,"delete-state"))}}function w(){for(var a=b(".spells-known"),c=0;c<a.length;c++){var g=f(a[c],".spell-level"),h=g.querySelector(".spells-known"),i=g.querySelector(".remove-spell");a[c].children.length>0?e(i,"hidden"):(h.dataset.deleteSpellState="false",e(h,"delete-state"),e(i,"active"),d(i,"hidden"))}}function x(){for(var a=0;a<wa.length;a++){var b=f(wa[a],".new-spell"),c=b.querySelector("input");c.addEventListener("keypress",function(){y(this)},!1)}}function y(a){var b=event.keyCode||event.which;13==b&&(D(a),E())}function z(b){var c=f(b,".spell-level"),d=c.querySelector(".spells-known").dataset.deleteSpellState,e=b.innerHTML,g=c.dataset.spellLevel,h=a(".spells-prepared.spell-level-"+g),i=document.createElement("a");i.setAttribute("href","javascript:void(0)"),i.setAttribute("class","spell-prepared-item button button-primary"),i.setAttribute("data-cast","false"),i.setAttribute("data-event-listener","false"),i.innerHTML=e,"true"==d&&b.remove(),"false"==d&&h.appendChild(i),E(),q(),w()}function A(a){var b=a.querySelector(".icon-bookmark"),d=a.dataset.cast;"true"==d&&(a.remove(),B()),"false"==d&&(a.dataset.cast="true",c(a,"spell-cast"),c(b,"icon-bookmark"),c(b,"icon-close"),B())}function B(){for(var c=b(".spells-prepared"),d=0;d<c.length;d++){var e=d,f="spell-prepared-level-"+e,h=a(".spells-prepared.spell-level-"+e);g(f,h.innerHTML)}}function C(){for(var c=b(".spells-prepared"),d=0;d<c.length;d++){var e=d,f="spell-prepared-level-"+e,g=h(f),i=a(".spells-prepared.spell-level-"+e);h(f)&&(i.innerHTML=g)}}function D(a){var b=(f(a,".spell-level").dataset.spellLevel,f(a,".new-spell")),c=f(a,".spell-level").querySelector(".spells-known"),d=b.querySelector("input"),e=d.value,g=document.createElement("a");g.setAttribute("href","javascript:void(0)"),g.setAttribute("data-event-listener","false"),g.setAttribute("class","spell-known-item button button-secondary"),g.innerHTML=e;var h=document.createElement("span");h.setAttribute("class","icon-bookmark"),""!==e&&(c.appendChild(g),g.insertBefore(h,g.firstChild),d.value=""),p(),w()}function E(){for(var a=b(".spells-known"),c=0;c<a.length;c++){var d=c,e="spell-known-level-"+d,f=a[c];g(e,f.innerHTML)}}function F(){for(var a=b(".spells-known"),c=0;c<a.length;c++){var d=c,e="spell-known-level-"+d,f=h(e),g=a[c];h(e)&&(g.innerHTML=f)}}function G(){for(var c=b(".spells-prepared"),f=0;f<c.length;f++){var g=f,h=a(".spells-prepared.spell-level-"+g),i=a(".spells-prepared.spell-level-"+g).parentNode.parentNode;h.children.length>0?e(i,"hidden"):d(i,"hidden")}}function H(a){var b=a.classList;g(b[1],a.innerHTML)}function I(){for(var b=0;b<ua.length;b++){var c=ua[b].classList;h(c[1])&&(a("."+c[1]).innerHTML=h(c[1]))}}function J(){for(var a=0;a<ua.length;a++)ua[a].addEventListener("input",function(){H(this)},!1)}function K(){for(var a=[],b=0;b<va.length;b++)a.push(va[b].value);g("input-skill-list",a)}function L(){var a=h("input-skill-list");if(a)var b=a.split(",");if(a)for(var c=0;c<va.length;c++)va[c].value=parseInt(b[c],10)}function M(){for(var a=0;a<qa.length;a++){var b,c=qa[a].querySelector(".name.skill-value").dataset.ability;"str"==c?b=""==ka.innerHTML?parseInt($.innerHTML,10):parseInt(ka.innerHTML,10):"dex"==c?b=""==la.innerHTML?parseInt(_.innerHTML,10):parseInt(la.innerHTML,10):"con"==c?b=""==ma.innerHTML?parseInt(aa.innerHTML,10):parseInt(ma.innerHTML,10):"int"==c?b=""==na.innerHTML?parseInt(ba.innerHTML,10):parseInt(na.innerHTML,10):"wis"==c?b=""==oa.innerHTML?parseInt(ca.innerHTML,10):parseInt(oa.innerHTML,10):"cha"==c&&(b=""==pa.innerHTML?parseInt(da.innerHTML,10):parseInt(pa.innerHTML,10));var d=i(qa[a].querySelector(".ranks.skill-value")),e=i(qa[a].querySelector(".misc.skill-value")),f=b+d+e;qa[a].querySelector(".total.skill-value").innerHTML=f}}function N(){for(var a=b(".ranks.skill-value"),c=b(".misc.skill-value"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){M(),K()},!1);for(var d=0;d<c.length;d++)c[d].addEventListener("input",function(){M(),K()},!1)}function O(){var a=window.document,b=a.documentElement,d=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullscreen,e=a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen;a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement?(e.call(a),c(sa,"active"),c(sa.querySelector("span"),"icon-fullscreen-exit"),c(sa.querySelector("span"),"icon-fullscreen")):(d.call(b),c(sa,"active"),c(sa.querySelector("span"),"icon-fullscreen-exit"),c(sa.querySelector("span"),"icon-fullscreen"))}function P(a){var b,c=a.parentNode,f=c.querySelector(".input-field");if(c.querySelector(".input-label"))var b=c.querySelector(".input-label");c.querySelector(".input-label")&&(f==document.activeElement?d(b,"input-label-focus"):e(b,"input-label-focus"))}function Q(){for(var a=0;a<ta.length;a++){var b=ta[a],c=b.querySelector(".input-field");if(b.querySelector(".input-label"))var f=b.querySelector(".input-label");b.querySelector(".input-label")&&(c==document.activeElement?d(f,"input-label-focus"):e(f,"input-label-focus"))}}function R(){for(var a=0;a<ta.length;a++){var b=ta[a].querySelector(".input-field");b.addEventListener("input",function(){P(this),S(this)},!1),b.addEventListener("focus",function(){P(this),S(this)},!1),b.addEventListener("blur",function(){P(this),S(this)},!1)}}function S(a){var b=a.id;g(b,a.value)}function T(){for(var b=0;b<ta.length;b++){var c=ta[b].querySelector(".input-field").id;h(c)&&(a("#"+c).value=h(c))}}var U=a(".stats.str .score"),V=a(".stats.dex .score"),W=a(".stats.con .score"),X=a(".stats.int .score"),Y=a(".stats.wis .score"),Z=a(".stats.cha .score"),$=a(".stats.str .modifier"),_=a(".stats.dex .modifier"),aa=a(".stats.con .modifier"),ba=a(".stats.int .modifier"),ca=a(".stats.wis .modifier"),da=a(".stats.cha .modifier"),ea=a(".stats.str .temp-score"),fa=a(".stats.dex .temp-score"),ga=a(".stats.con .temp-score"),ha=a(".stats.int .temp-score"),ia=a(".stats.wis .temp-score"),ja=a(".stats.cha .temp-score"),ka=a(".stats.str .temp-modifier"),la=a(".stats.dex .temp-modifier"),ma=a(".stats.con .temp-modifier"),na=a(".stats.int .temp-modifier"),oa=a(".stats.wis .temp-modifier"),pa=a(".stats.cha .temp-modifier"),qa=(a(".skill-list"),b(".skill-list .skill-details")),ra=(a(".ac"),a(".ac-touch"),a(".ac-flat-footed"),a(".clear-local-storage")),sa=a(".toggle-fullscreen"),ta=(b(".spell-check"),b(".input-block")),ua=b(".textarea"),va=b("input.skill-value"),wa=b(".add-spell"),xa=b(".remove-spell");ra.addEventListener("click",function(){localStorage.clear()},!1),sa.addEventListener("click",function(){O()},!1),C(),F(),I(),T(),L(),o(),G(),w(),r(),s(),q(),p(),m(),N(),t(),x(),u(),J(),R(),l(),M(),Q()}awesomesheet(),smoothScroll.init();