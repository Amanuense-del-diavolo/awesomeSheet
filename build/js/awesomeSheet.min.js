function awesomesheet(){function a(a){return document.querySelector(a)}function b(a){return document.querySelectorAll(a)}function c(a,b){a.classList.toggle(b)}function d(a,b){a.classList.add(b)}function e(a,b){a.classList.remove(b)}function f(a,b){for(var c=b.charAt(0);a&&a!==document;a=a.parentNode){if("."===c&&a.classList.contains(b.substr(1)))return a;if("#"===c&&a.id===b.substr(1))return a;if("["===c&&a.hasAttribute(b.substr(1,b.length-2)))return a;if(a.tagName.toLowerCase()===b)return a}return!1}function g(a){var b=parseInt(a.value,10)||0;return b}function h(a,b){window.setTimeout(a,b)}function i(a,b){localStorage.getItem&&localStorage.setItem(a,b)}function j(a){localStorage.getItem&&localStorage.removeItem(a)}function k(a){if(""==localStorage.getItem(a))localStorage.removeItem(a);else if(localStorage.getItem(a))return localStorage.getItem(a)}function l(){var a=Pa.querySelector("span"),b=window.document,d=b.documentElement,e=d.requestFullscreen||d.mozRequestFullScreen||d.webkitRequestFullScreen||d.msRequestFullscreen,f=b.exitFullscreen||b.mozCancelFullScreen||b.webkitExitFullscreen||b.msExitFullscreen;b.fullscreenElement||b.mozFullScreenElement||b.webkitFullscreenElement||b.msFullscreenElement?(f.call(b),c(Pa,"active"),c(a,"icon-fullscreen-exit"),c(a,"icon-fullscreen")):(e.call(d),c(Pa,"active"),c(a,"icon-fullscreen-exit"),c(a,"icon-fullscreen"))}function m(a){a.value<=0?a.value="":a.value>=100&&(a.value=100)}function n(a){function b(){var a=document.createElement("div");a.setAttribute("class","check-group"),d.appendChild(a)}var c=f(a,".clone"),d=c.querySelector(".consumable-counts"),e=parseInt(a.value,10)||0,g=d.querySelector(".check-group"),h=d.querySelectorAll(".check").length;for(g||e>0&&b();e>h;){var g=d.lastChild;g.children.length>=10&&(b(),g=d.lastChild);var i=document.createElement("span");i.setAttribute("class","check"),g.appendChild(i),h++}for(;h>e;){var g=d.lastChild;g.children.length>0&&g.removeChild(g.lastChild),g.children.length<=0&&(g.remove(),h>0&&(g=d.querySelector(".check-group"))),h--}o(a)}function o(a){for(var b=f(a,".clone"),c=b.querySelector(".consumable-counts"),g=b.querySelector(".consumable-used"),h=parseInt(g.value,10)||0,i=c.querySelectorAll(".check"),j=i.length-h,k=0;k<i.length;k++)d(i[k],"used");for(var k=0;j>k;k++)e(i[k],"used")}function p(){for(var a=b(".consumable-total"),c=0;c<a.length;c++)n(a[c])}function q(){for(var a=b(".consumable-used"),c=0;c<a.length;c++)o(a[c])}function r(){var b=a(".consumables .clone-add"),c=a(".consumables .clone-remove"),d=a(".attacks .clone-add"),e=a(".attacks .clone-remove");b.addEventListener("click",function(){s(".consumables")},!1),c.addEventListener("click",function(){u(".consumables")},!1),d.addEventListener("click",function(){s(".attacks")},!1),e.addEventListener("click",function(){u(".attacks")},!1)}function s(b){function c(a){a&&(a.addEventListener("input",function(){_(a)},!1),a.addEventListener("focus",function(){_(a)},!1),a.addEventListener("blur",function(){_(a)},!1))}function d(a){a&&(a.addEventListener("input",function(){da(a)},!1),a.addEventListener("focus",function(){da(a)},!1),a.addEventListener("blur",function(){da(a)},!1))}function e(a){a&&(a.addEventListener("input",function(){m(a)},!1),a.addEventListener("focus",function(){m(a)},!1),a.addEventListener("blur",function(){m(a)},!1))}function f(a){a&&(a.addEventListener("input",function(){n(a)},!1),a.addEventListener("focus",function(){n(a)},!1),a.addEventListener("blur",function(){n(a)},!1))}function g(a){a&&(a.addEventListener("input",function(){o(a)},!1),a.addEventListener("focus",function(){o(a)},!1),a.addEventListener("blur",function(){o(a)},!1))}function h(a){a&&a.addEventListener("click",function(){t(a,b)},!1)}var j=a(b),k=(j.querySelector(".clone-controls"),j.querySelector(".clone-target")),l=k.querySelectorAll(".clone"),p=l.length;p++,".consumables"==b&&i("clone-consumable-count",p),".attacks"==b&&i("clone-attack-count",p);var q=document.createElement("div");if(q.setAttribute("class","clone"),q.setAttribute("data-clone-count",p),99>=p){k.appendChild(q);var r='<div class="row"><div class="col-xs-8"><div class="input-block"><label class="input-label" for="input-consumable-'+p+'">Item</label><input class="input-field" id="input-consumable-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-4"><div class="row no-gutter"><div class="col-xs-6"><div class="input-block"><label class="input-label" for="input-consumable-total-'+p+'">Total</label><input class="input-field consumable-total" id="input-consumable-total-'+p+'" type="number" tabindex="3"></div></div><div class="col-xs-6"><div class="input-block"><label class="input-label" for="input-consumable-used-'+p+'">Used</label><input class="input-field consumable-used" id="input-consumable-used-'+p+'" type="number" tabindex="3"></div></div></div></div><div class="col-xs-12"><div class="consumable-counts clearfix"></div><div class="clone-delete-controls"><a href="javascript:void(0)" class="button button-primary button-small" id="remove-consumable-'+p+'" tabindex="3"><span class="icon-close"></span> Remove</a></div></div></div>',s='<div class="row no-gutter"><div class="col-xs-6"><div class="input-block"><label class="input-label" for="input-weapon-'+p+'">Weapon</label><input class="input-field" id="input-weapon-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-3"><div class="input-block"><label class="input-label" for="input-attack-'+p+'">Attack</label><input class="input-field" id="input-attack-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-3"><div class="input-block"><label class="input-label" for="input-damage-'+p+'">Damage</label><input class="input-field" id="input-damage-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-4"><div class="input-block"><label class="input-label" for="input-range-'+p+'">Range</label><input class="input-field" id="input-range-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-4"><div class="input-block"><label class="input-label" for="input-ammo-'+p+'">Ammo</label><input class="input-field" id="input-ammo-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-4"><div class="input-block"><label class="input-label" for="input-critical-'+p+'">Critical</label><input class="input-field" id="input-critical-'+p+'" type="text" tabindex="3"></div></div><div class="col-xs-12"><div class="clone-delete-controls"><a href="javascript:void(0)" class="button button-primary button-small" id="remove-attack-'+p+'" tabindex="3"><span class="icon-close"></span> Remove</a></div></div></div>';".consumables"==b&&(q.innerHTML=r),".attacks"==b&&(q.innerHTML=s)}if(".consumables"==b){if(q.querySelector("#input-consumable-"+p))var u=q.querySelector("#input-consumable-"+p);if(q.querySelector("#input-consumable-total-"+p))var v=q.querySelector("#input-consumable-total-"+p);if(q.querySelector("#input-consumable-used-"+p))var w=q.querySelector("#input-consumable-used-"+p);if(q.querySelector("#remove-consumable-"+p))var x=q.querySelector("#remove-consumable-"+p);c(u),d(u),c(v),d(v),e(v),f(v),c(w),d(w),e(w),g(w),h(x)}if(".attacks"==b){if(q.querySelector("#input-weapon-"+p))var y=q.querySelector("#input-weapon-"+p);if(q.querySelector("#input-attack-"+p))var z=q.querySelector("#input-attack-"+p);if(q.querySelector("#input-range-"+p))var A=q.querySelector("#input-range-"+p);if(q.querySelector("#input-ammo-"+p))var B=q.querySelector("#input-ammo-"+p);if(q.querySelector("#input-damage-"+p))var C=q.querySelector("#input-damage-"+p);if(q.querySelector("#input-critical-"+p))var D=q.querySelector("#input-critical-"+p);if(q.querySelector("#remove-attack-"+p))var x=q.querySelector("#remove-attack-"+p);c(y),d(y),c(z),d(z),c(A),d(A),c(B),d(B),c(C),d(C),c(D),d(D),h(x)}}function t(a,b){var c=f(a,".clone-block"),d=c.querySelector(".clone-target"),e=f(a,".clone"),g=e.querySelectorAll("input");e.remove();for(var h=0;h<g.length;h++)localStorage.removeItem(g[h].id);var j=d.querySelectorAll(".clone"),k=j.length;if(0==k)u(b);else{for(var h=0;k>h;h++){var l=h+1;j[h].dataset.cloneCount=l}j=d.querySelectorAll(".clone"),k=j.length;for(var h=0;k>h;h++){for(var l=h+1,m=j[h].querySelectorAll("input"),n=j[h].querySelectorAll("label"),o=0;o<m.length;o++){ea(m[o]);var p=m[o].id,q=p.replace(/\d+/g,""),r=q+l;m[o].id=r,da(m[o])}for(var s=0;s<n.length;s++){var t=n[s].htmlFor,v=t.replace(/\d+/g,""),w=v+l;n[s].htmlFor=w}}0>=k?(".consumables"==b&&i("clone-consumable-count",""),".attacks"==b&&i("clone-attack-count","")):(".consumables"==b&&i("clone-consumable-count",k),".attacks"==b&&i("clone-attack-count",k))}}function u(b){var f=a(b),g=f.querySelector(".clone-controls"),h=g.querySelector(".clone-remove"),i=(f.querySelectorAll(".clone-delete-controls"),f.querySelector(".clone-target")),j=i.querySelectorAll(".clone"),k=j.length;c(h,"active"),c(h,"button-primary"),c(h,"button-secondary"),"true"==f.dataset.deleteCloneState?(e(f,"delete-state"),f.dataset.deleteCloneState="false"):"false"==f.dataset.deleteCloneState&&(d(f,"delete-state"),f.dataset.deleteCloneState="true"),0==k&&(e(f,"delete-state"),f.dataset.deleteCloneState="false",e(h,"active"),e(h,"button-primary"),d(h,"button-secondary"))}function v(){for(var a=k("clone-consumable-count"),b=k("clone-attack-count"),c=0;a>c;c++)s(".consumables");for(var c=0;b>c;c++)s(".attacks")}function w(){for(var a=0;a<La.length;a++){var b=La[a].querySelector(".hidable-toggle");b.addEventListener("click",function(){x(this)},!1)}}function x(a){var b=(a.textContent,a.querySelector(".icon")),g=a.querySelector(".text"),h=f(a,".hidable-block"),i=h.querySelectorAll(".hidable"),j=h.querySelectorAll(".hidable-on-empty-input"),k=h.querySelectorAll(".hidable-on-empty-textarea");if("true"==h.dataset.allHidden){for(var l=0;l<i.length;l++)e(i[l],"hidden");for(var l=0;l<j.length;l++)e(j[l],"hidden");for(var l=0;l<k.length;l++)e(k[l],"hidden");h.dataset.allHidden="false",c(b,"icon-unfold-less"),c(b,"icon-unfold-more"),g.textContent="Hide Fields"}else if("false"==h.dataset.allHidden){for(var l=0;l<j.length;l++){var m=j[l].querySelector(".input-field");(null==m.value||""==m.value)&&d(j[l],"hidden")}for(var l=0;l<i.length;l++)d(i[l],"hidden");for(var l=0;l<k.length;l++){var n=k[l].querySelector(".textarea");(null==n.textContent||""==n.textContent)&&d(k[l],"hidden")}h.dataset.allHidden="true",c(b,"icon-unfold-less"),c(b,"icon-unfold-more"),g.textContent="Show All"}}function y(a,b){var c=(g(a),z(a));b.textContent=c}function z(a){var b=Math.floor((a.value-10)/2);return b}function A(){for(var a=b(".stats"),c=0;c<a.length;c++){var d=a[c].querySelector(".score"),e=a[c].querySelector(".modifier"),f=a[c].querySelector(".temp-score"),g=a[c].querySelector(".temp-modifier");""!==d.value?y(d,e):e.textContent="",""!==f.value?y(f,g):g.textContent=""}}function B(){for(var a=b(".stats .score"),c=b(".stats .temp-score"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){A(),Z(),aa(),C()},!1);for(var d=0;d<c.length;d++)c[d].addEventListener("input",function(){A(),Z(),aa(),C()},!1)}function C(){i("stats-str",ka.value),i("stats-dex",la.value),i("stats-con",ma.value),i("stats-int",na.value),i("stats-wis",oa.value),i("stats-cha",pa.value),i("stats-strTemp",wa.value),i("stats-dexTemp",xa.value),i("stats-conTemp",ya.value),i("stats-intTemp",za.value),i("stats-wisTemp",Aa.value),i("stats-chaTemp",Ba.value)}function D(){k("stats-str")&&(ka.value=k("stats-str")),k("stats-dex")&&(la.value=k("stats-dex")),k("stats-con")&&(ma.value=k("stats-con")),k("stats-int")&&(na.value=k("stats-int")),k("stats-wis")&&(oa.value=k("stats-wis")),k("stats-cha")&&(pa.value=k("stats-cha")),k("stats-strTemp")&&(wa.value=k("stats-strTemp")),k("stats-dexTemp")&&(xa.value=k("stats-dexTemp")),k("stats-conTemp")&&(ya.value=k("stats-conTemp")),k("stats-intTemp")&&(za.value=k("stats-intTemp")),k("stats-wisTemp")&&(Aa.value=k("stats-wisTemp")),k("stats-chaTemp")&&(Ba.value=k("stats-chaTemp"))}function E(){for(var a=b(".spell-known-item"),c=0;c<a.length;c++){var d=a[c].dataset.eventListener;"false"==d&&(a[c].dataset.eventListener="true",a[c].addEventListener("click",function(){P(this),R()},!1))}}function F(){for(var a=b(".spell-known-item"),c=0;c<a.length;c++)a[c].dataset.eventListener="false",e(a[c],"hidden")}function G(){for(var a=0;a<Ka.length;a++)Ka[a].addEventListener("click",function(){T(this),R()},!1)}function H(){a("#spells .prepare-spell").addEventListener("click",function(){M(this,"prepare"),R()},!1)}function I(){a("#spells .unprepare-spell").addEventListener("click",function(){M(this,"unprepare"),R()},!1)}function J(){a("#spells .cast-spell").addEventListener("click",function(){M(this,"cast"),R()},!1)}function K(){a("#spells .active-spell").addEventListener("click",function(){M(this,"active"),R()},!1)}function L(){a("#spells .remove-spell").addEventListener("click",function(){M(this,"remove"),R()},!1)}function M(a,b){var c=f(a,"#spells"),c=f(a,"#spells"),g=(c.querySelector(".prepare-spell"),c.querySelector(".unprepare-spell"),c.querySelector(".cast-spell"),c.querySelector(".active-spell"),c.querySelector(".remove-spell")),h=f(a,".spell-state-controls").querySelectorAll(".button");if(a.classList.contains("active")){for(var i=0;i<h.length;i++)e(h[i],"active");c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",e(c,"prepare-state"),e(c,"unprepare-state"),e(c,"cast-state"),e(c,"active-state"),e(c,"delete-state"),e(g,"button-primary"),d(g,"button-secondary")}else{for(var i=0;i<h.length;i++)e(h[i],"active");d(a,"active"),"prepare"==b?(c.dataset.prepareSpellState="true",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",d(c,"prepare-state"),e(c,"unprepare-state"),e(c,"cast-state"),e(c,"active-state"),e(c,"delete-state"),e(g,"button-primary"),d(g,"button-secondary")):"unprepare"==b?(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="true",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",e(c,"prepare-state"),d(c,"unprepare-state"),e(c,"cast-state"),e(c,"active-state"),e(c,"delete-state"),e(g,"button-primary"),d(g,"button-secondary")):"cast"==b?(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="true",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="false",e(c,"prepare-state"),e(c,"unprepare-state"),d(c,"cast-state"),e(c,"active-state"),e(c,"delete-state"),e(g,"button-primary"),d(g,"button-secondary")):"active"==b?(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="true",c.dataset.deleteSpellState="false",e(c,"prepare-state"),e(c,"unprepare-state"),e(c,"cast-state"),d(c,"active-state"),e(c,"delete-state"),e(g,"button-primary"),d(g,"button-secondary")):"remove"==b&&(c.dataset.prepareSpellState="false",c.dataset.unprepareSpellState="false",c.dataset.castSpellState="false",c.dataset.activeSpellState="false",c.dataset.deleteSpellState="true",e(c,"prepare-state"),e(c,"unprepare-state"),e(c,"cast-state"),e(c,"active-state"),d(c,"delete-state"),d(g,"button-primary"),e(g,"button-secondary"))}}function N(){for(var a=0;a<Ka.length;a++){var b=f(Ka[a],".new-spell"),c=b.querySelector("input");c.addEventListener("keypress",function(){O(this)},!1)}}function O(a){var b=event.keyCode||event.which;13==b&&(T(a),R())}function P(a){var b=f(a,"#spells"),g=b.dataset.prepareSpellState,h=b.dataset.unprepareSpellState,i=b.dataset.castSpellState,k=b.dataset.activeSpellState,l=b.dataset.deleteSpellState,m=a.querySelector(".spell-marks"),n=a.querySelector(".spell-active");if("true"==g){var o=document.createElement("span");o.setAttribute("class","icon icon-radio-button-checked"),m.insertBefore(o,m.firstChild),m.children.length>0&&(d(a,"button-primary"),e(a,"button-tertiary"),e(a,"hidable"))}if("true"==h&&(m.firstChild&&m.firstChild.remove(),m.children.length<=0&&(e(a,"button-primary"),d(a,"button-tertiary"),d(a,"hidable"))),"true"==i){for(var p=m.children,q=0,r=0;r<p.length;r++)if(p[r].classList.contains("icon-radio-button-checked")){c(p[r],"icon-radio-button-checked"),c(p[r],"icon-radio-button-unchecked");break}for(var r=0;r<p.length;r++)p[r].classList.contains("icon-radio-button-checked")&&q++;0>=q&&(e(a,"button-primary"),d(a,"button-tertiary"))}if("true"==k){var s=document.createElement("span");s.setAttribute("class","icon icon-play-arrow"),m.children.length>0&&(n.children.length>0?n.firstChild.remove():n.appendChild(s)),m.children.length<=0&&n.children.length>0&&n.firstChild.remove()}if("true"==l){var t=a.dataset.spellName;j("spell-saved-"+t.replace(/\s+/g,"-").toLowerCase()),a.remove()}}function Q(a){var b=document.createElement("a");b.setAttribute("href","javascript:void(0)"),b.setAttribute("data-spell-name",a.replace(/\s+/g,"-").toLowerCase()),b.setAttribute("id",a.replace(/\s+/g,"-").toLowerCase()),b.setAttribute("data-event-listener","false"),b.setAttribute("class","spell-known-item button button-tertiary hidable"),b.textContent=a;var c=document.createElement("span");c.setAttribute("class","spell-marks"),b.appendChild(c);var d=document.createElement("span");return d.setAttribute("class","spell-active"),b.appendChild(d),b}function R(){for(var a=b(".spell-known-item"),c=function(a,b,c,d,e){this.name=a,this.level=b,this.prepared=c||0,this.active=d||!1,this.cast=e||0},d=0;d<a.length;d++){var e=a[d].textContent,g=f(a[d],".spell-level").dataset.spellLevel,h=a[d].querySelector(".spell-marks").children.length,j=a[d].querySelector(".spell-marks").querySelectorAll(".icon-radio-button-unchecked").length,k=a[d].querySelector(".spell-active").children.length;k=k>0?!0:!1;var l=new c(e,g,h,k,j);i("spell-saved-"+l.name.replace(/\s+/g,"-").toLowerCase(),JSON.stringify(l))}}function S(){for(var b=[],c=0;c<localStorage.length;c++)"spell-saved"==localStorage.key(c).substring(0,11)&&b.push(localStorage.key(c));for(var c=0;c<b.length;c++){var f=JSON.parse(localStorage.getItem(b[c])),g=a(".spells-known.spell-level-"+f.level);if(g.querySelector("#"+f.name.replace(/\s+/g,"-").toLowerCase()))var h=g.querySelector("#"+f.name.replace(/\s+/g,"-").toLowerCase());else{var h=Q(f.name);g.appendChild(h)}var i=h.querySelector(".spell-marks"),j=h.querySelector(".spell-active");if(f.prepared>0){e(h,"hidable"),e(h,"button-tertiary"),d(h,"button-primary");for(var k=0;k<f.prepared;k++){var l=document.createElement("span");l.setAttribute("class","icon icon-radio-button-checked"),i.insertBefore(l,i.firstChild)}}if(f.cast>0){for(var m=i.querySelectorAll(".icon-radio-button-checked"),k=0;k<f.cast;k++)m[k]&&(e(m[k],"icon-radio-button-checked"),d(m[k],"icon-radio-button-unchecked"));f.cast>=f.prepared&&(e(h,"button-primary"),d(h,"button-tertiary"))}if(f.active){var n=document.createElement("span");n.setAttribute("class","icon icon-play-arrow"),f.prepared>0&&(j.children.length>0?j.firstChild.remove():j.appendChild(n))}}}function T(a){var b=f(a,".spell-level").dataset.spellLevel,c=f(a,".new-spell"),d=f(a,".spell-level").querySelector(".spells-known"),e=c.querySelector("input"),g=e.value,h=Q(g),j=function(a,b,c,d,e){this.name=a,this.level=b,this.prepared=c||0,this.active=d||!1,this.cast=e||0};if(""!==g){d.appendChild(h),e.value="";var h=new j(g,parseInt(b,10),0,!1,0);i("spell-saved-"+h.name.replace(/\s+/g,"-").toLowerCase(),JSON.stringify(h))}E()}function U(a){var b=a.classList;i(b[1],a.innerHTML)}function V(){for(var b=0;b<Ia.length;b++){var c=Ia[b].classList;k(c[1])&&(a("."+c[1]).innerHTML=k(c[1]))}}function W(){for(var a=0;a<Ia.length;a++)Ia[a].addEventListener("input",function(){U(this)},!1)}function X(){for(var a=[],b=0;b<Ja.length;b++)a.push(Ja[b].value);i("input-skill-list",a)}function Y(){var a=k("input-skill-list");if(a)var b=a.split(",");if(a)for(var c=0;c<Ja.length;c++)Ja[c].value=parseInt(b[c],10)}function Z(){for(var a=b(".skill-list .skill-details"),c=0;c<a.length;c++){var d,e=a[c].querySelector(".name.skill-value").dataset.ability;"str"==e?d=""==Ca.textContent?parseInt(qa.textContent,10):parseInt(Ca.textContent,10):"dex"==e?d=""==Da.textContent?parseInt(ra.textContent,10):parseInt(Da.textContent,10):"con"==e?d=""==Ea.textContent?parseInt(sa.textContent,10):parseInt(Ea.textContent,10):"int"==e?d=""==Fa.textContent?parseInt(ta.textContent,10):parseInt(Fa.textContent,10):"wis"==e?d=""==Ga.textContent?parseInt(ua.textContent,10):parseInt(Ga.textContent,10):"cha"==e&&(d=""==Ha.textContent?parseInt(va.textContent,10):parseInt(Ha.textContent,10)),isNaN(d)&&(d=0);var f=g(a[c].querySelector(".ranks.skill-value")),h=g(a[c].querySelector(".misc.skill-value")),i=d+f+h;a[c].querySelector(".total.skill-value").textContent=i}}function $(){for(var a=b(".ranks.skill-value"),c=b(".misc.skill-value"),d=0;d<a.length;d++)a[d].addEventListener("input",function(){Z(),X()},!1);for(var d=0;d<c.length;d++)c[d].addEventListener("input",function(){Z(),X()},!1)}function _(a){var b,c=a.parentNode,f=c.querySelector(".input-field");if(c.querySelector(".input-label"))var b=c.querySelector(".input-label");c.querySelector(".input-label")&&(f==document.activeElement?d(b,"input-label-focus"):e(b,"input-label-focus"))}function aa(){function c(){x.length>0&&(y=x.reduce(function(a,b){return a+b}))}for(var d=b(".input-total-block"),e=0;e<d.length;e++){for(var f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=d[e].querySelector(".total"),w=(parseInt(d[e].querySelector(".total").textContent,10)||0,d[e].querySelectorAll(".input-field")),x=[],y=0,z=0;z<w.length;z++)w.length>0&&"true"==w[z].dataset.modifier&&x.push(parseInt(w[z].value,10)||0);c(),"true"==d[e].dataset.strBonus&&(f=""==Ca.textContent?parseInt(qa.textContent,10):parseInt(Ca.textContent,10)),"true"==d[e].dataset.dexBonus&&(g=""==Da.textContent?parseInt(ra.textContent,10):parseInt(Da.textContent,10)),"true"==d[e].dataset.conBonus&&(h=""==Ea.textContent?parseInt(sa.textContent,10):parseInt(Ea.textContent,10)),"true"==d[e].dataset.intBonus&&(i=""==Fa.textContent?parseInt(ta.textContent,10):parseInt(Fa.textContent,10)),"true"==d[e].dataset.wisBonus&&(j=""==Ga.textContent?parseInt(ua.textContent,10):parseInt(Ga.textContent,10)),"true"==d[e].dataset.chaBonus&&(k=""==Ha.textContent?parseInt(va.textContent,10):parseInt(Ha.textContent,10)),"true"==d[e].dataset.babBonus&&(l=parseInt(a("#input-base-attack").value,10)),"true"==d[e].dataset.sizeBonus&&(m=parseInt(a("#input-size-bonus").value,10)),"true"==d[e].dataset.specialSizeBonus&&(n=parseInt(a("#input-special-size-bonus").value,10)),"true"==d[e].dataset.levelBonus&&(o=parseInt(a("#input-level").value,10)),"true"==d[e].dataset.acArmor&&(q=parseInt(a("#input-ac-armor").value,10)),"true"==d[e].dataset.acShield&&(r=parseInt(a("#input-ac-shield").value,10)),"true"==d[e].dataset.acDeflect&&(s=parseInt(a("#input-ac-deflect").value,10)),"true"==d[e].dataset.acDodge&&(t=parseInt(a("#input-ac-dodge").value,10)),"true"==d[e].dataset.acNatural&&(u=parseInt(a("#input-ac-natural").value,10)),"true"==d[e].dataset.plusTenBonus&&(p=10),isNaN(o)&&(o=0),isNaN(f)&&(f=0),isNaN(g)&&(g=0),isNaN(h)&&(h=0),isNaN(i)&&(i=0),isNaN(j)&&(j=0),isNaN(k)&&(k=0),isNaN(l)&&(l=0),isNaN(m)&&(m=0),isNaN(n)&&(n=0),isNaN(o)&&(o=0),isNaN(p)&&(p=0),isNaN(q)&&(q=0),isNaN(r)&&(r=0),isNaN(s)&&(s=0),isNaN(t)&&(t=0),isNaN(u)&&(u=0);var A=y+o+l+m+n+p+f+g+h+i+j+k+q+r+s+t+u;v.textContent=A}}function ba(){for(var a=b(".input-block"),c=0;c<a.length;c++){var f=a[c],g=f.querySelector(".input-field");if(f.querySelector(".input-label"))var h=f.querySelector(".input-label");f.querySelector(".input-label")&&(g==document.activeElement?d(h,"input-label-focus"):e(h,"input-label-focus"))}}function ca(){for(var a=b(".input-block"),c=0;c<a.length;c++){var d=a[c].querySelector(".input-field");d.addEventListener("input",function(){_(this),da(this),aa()},!1),d.addEventListener("focus",function(){_(this),da(this),aa()},!1),d.addEventListener("blur",function(){_(this),da(this),aa()},!1)}}function da(a){var b=a.id;i(b,a.value)}function ea(a){var b=a.id;j(b)}function fa(){for(var c=b(".input-block"),d=0;d<c.length;d++){var e=c[d].querySelector(".input-field").id;k(e)&&(a("#"+e).value=k(e))}}function ga(b,c,e){function f(){d(j,"reveal"),d(i,"reveal")}var g=a("body"),i=document.createElement("div");i.setAttribute("class","prompt prompt-shade");var j=document.createElement("div");j.setAttribute("class","prompt prompt-modal");var k=document.createElement("div");k.setAttribute("class","container");var l=document.createElement("div");l.setAttribute("class","row");var m=document.createElement("div");m.setAttribute("class","row");var n=document.createElement("div");n.setAttribute("class","col-xs-12");var o=document.createElement("div");o.setAttribute("class","col-xs-6 col-lg-5");var p=document.createElement("div");p.setAttribute("class","col-xs-6 col-lg-5 col-lg-offset-2");var q=document.createElement("h1");q.setAttribute("class","prompt-heading"),q.textContent=b;var r=document.createElement("p");r.setAttribute("class","prompt-message"),r.textContent=c;var s=document.createElement("a");s.setAttribute("href","javascript:void(0)"),s.setAttribute("class","button button-primary button-block prompt-action"),s.textContent="Confirm";var t=document.createElement("a");t.setAttribute("href","javascript:void(0)"),t.setAttribute("class","button button-secondary button-block prompt-cancel"),t.textContent="Cancel",n.appendChild(q),n.appendChild(r),o.appendChild(t),p.appendChild(s),l.appendChild(n),m.appendChild(o),m.appendChild(p),k.appendChild(l),k.appendChild(m),j.appendChild(k),g.querySelector(".prompt.prompt-shade")||g.querySelector(".prompt.prompt-modal")||(g.appendChild(i),g.appendChild(j),h(f,10),ha(e))}function ha(b){var c=a(".prompt-shade"),d=(a(".prompt-modal"),a(".prompt-modal .prompt-action")),e=a(".prompt-modal .prompt-cancel");c.addEventListener("click",function(){ia()}),e.addEventListener("click",function(){ia()}),d.addEventListener("click",function(){"clear all"==b&&ja()})}function ia(){function b(){c.remove(),d.remove()}var c=a(".prompt-shade"),d=a(".prompt-modal");a(".prompt-modal .prompt-cancel");c&&d&&(c.style.opacity=0,d.style.opacity=0,h(b,500))}function ja(){localStorage.clear(),document.location.reload(!0)}var ka=a(".stats.str .score"),la=a(".stats.dex .score"),ma=a(".stats.con .score"),na=a(".stats.int .score"),oa=a(".stats.wis .score"),pa=a(".stats.cha .score"),qa=a(".stats.str .modifier"),ra=a(".stats.dex .modifier"),sa=a(".stats.con .modifier"),ta=a(".stats.int .modifier"),ua=a(".stats.wis .modifier"),va=a(".stats.cha .modifier"),wa=a(".stats.str .temp-score"),xa=a(".stats.dex .temp-score"),ya=a(".stats.con .temp-score"),za=a(".stats.int .temp-score"),Aa=a(".stats.wis .temp-score"),Ba=a(".stats.cha .temp-score"),Ca=a(".stats.str .temp-modifier"),Da=a(".stats.dex .temp-modifier"),Ea=a(".stats.con .temp-modifier"),Fa=a(".stats.int .temp-modifier"),Ga=a(".stats.wis .temp-modifier"),Ha=a(".stats.cha .temp-modifier"),Ia=b(".textarea"),Ja=b(".skill-value"),Ka=b(".add-spell"),La=b(".hidable-block"),Ma=(b(".clone-block"),a("nav")),Na=a("nav .toggle-nav"),Oa=a(".clear-all"),Pa=a(".toggle-fullscreen");Pa.addEventListener("click",function(){l()},!1),Oa.addEventListener("click",function(){ga("Are you sure?","All information will be removed. This can not be undone.","clear all"),e(Ma,"open")},!1),Na.addEventListener("click",function(){c(Ma,"open")},!1),window.addEventListener("click",function(a){Ma.classList.contains("open")&&a.target!=Ma&&a.target.parentNode!=Ma&&a.target.parentNode.parentNode!=Ma&&a.target.parentNode.parentNode.parentNode!=Ma&&e(Ma,"open")}),v(),S(),V(),fa(),Y(),D(),F(),E(),B(),$(),G(),N(),H(),I(),J(),K(),L(),w(),W(),ca(),r(),A(),Z(),ba(),aa(),p(),q()}awesomesheet(),smoothScroll.init();